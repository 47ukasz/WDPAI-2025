<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/public/styles/main.css" />
    <link rel="stylesheet" href="/public/styles/offer-form.css" />
    <script
      src="https://kit.fontawesome.com/cf24175f1e.js"
      crossorigin="anonymous"
    ></script>
    <title>
      <?= isset($offer) ? "Edytuj ogłoszenie" : "Dodaj ogłoszenie" ?>
    </title>
    <script
      type="module"
      src="/public/scripts/validation-offer.js"
      defer
    ></script>
  </head>
  <body>
    <div class="container">
      <h1 class="header">
        <?= isset($offer) ? "Edytuj ogłoszenie" : "Dodaj nowe ogłoszenie" ?>
      </h1>
      <main class="offer-content">
        <form
          action="<?= isset($offer) ? '/updateOffer' : '/addOffer' ?>"
          method="POST"
          enctype="multipart/form-data"
        >
          <?php if (isset($offer)): ?>
          <input type="hidden" name="id" value="<?= $offer->getId() ?>" />
          <?php endif; ?>

          <div class="container-box">
            <div class="input-box">
              <label for="title">Tytuł</label>
              <input
                name="title"
                type="text"
                id="title"
                placeholder="Wpisz tytuł ogłoszenia"
                value="<?= $offer->getTitle() ?>"
              />
            </div>

            <div class="input-box">
              <label for="description">Opis</label>
              <!-- prettier-ignore -->
              <textarea name="description" type="text" id="description" placeholder="Wpisz opis ogłoszenia"><?= $offer->getDescription() ?></textarea>
            </div>

            <div class="offer-content-box">
              <div class="input-box">
                <label for="price">Cena</label>
                <input
                  name="price"
                  type="number"
                  id="price"
                  placeholder="Wpisz cenę"
                  min="0"
                  step="0.01"
                  value="<?= $offer->getPrice() ?>"
                />
              </div>

              <div class="input-box">
                <label for="phone">Numer telefonu</label>
                <input
                  name="phone_number"
                  type="tel"
                  id="phone"
                  placeholder="Wpisz numer telefonu"
                  pattern="^(?:\+48\s?)?(?:\d[\s-]?){8}\d$"
                  inputmode="tel"
                  value="<?= $offer->getPhoneNumber() ?>"
                />
              </div>
            </div>
          </div>

          <div class="container-box container-box-button">
            <div class="input-box-file">
              <label for="photo">
                <?= isset($offer) ? "Zmień zdjęcie (opcjonalne)" : "Zdjęcie (opcjonalne)" ?>
              </label>
              <div>
                <input name="photo" type="file" id="photo" />
                <div class="file-placeholder">
                  <i
                    class="fa-solid fa-cloud-arrow-up fa-2xl"
                    style="color: #dce4e8"
                  ></i>
                  <p>
                    <span>Kliknij, aby przesłać</span> w formacie SVG, PNG, JPG
                    (MAX. 800x400px)
                  </p>
                </div>
              </div>
            </div>
            <div class="form-btns">
              <?php if(isset($offer)): ?>
              <a href="/user-page" class="btn btn-outline">Anuluj zmiany</a>
              <?php endif; ?>
              <button class="btn btn-primary">
                <?= isset($offer) ? "Zapisz zmiany" : "Zapisz" ?>
              </button>
            </div>
          </div>
        </form>
        <ul class="form-validation">
          <?php if(isset($messages)): ?>
          <?php foreach ($messages as $msg): ?>
          <li><? echo $msg; ?></li>
          <?php endforeach; ?>
          <?php endif; ?>
        </ul>
      </main>
    </div>
  </body>
</html>
